<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!--Description-->
    
        <meta name="description" content="#目录与路径
##绝对路径与相对路径：略

##目录的相关操作

####几个特殊目录
. 代表此层目录

.. 代表上一层目录

- 代表前一个工作目录

~ 代表『目前用户身份』所在的家目录

**~**account 代表 account 这个用户的家目录(account 是个账号名称)">
    

    <!--Author-->
    
        <meta name="author" content="March 13th">
    

    <!--Open Graph Title-->
    
        <meta property="og:title" content="第六章、Linux文件与目录管理"/>
    

    <!--Open Graph Description-->
    

    <!--Open Graph Site Name-->
    <meta property="og:site_name" content="March 13th&#39;s Blog"/>

    <!--Type page-->
    
        <meta property="og:type" content="article" />
    

    <!--Page Cover-->
    

    
        <meta name="twitter:card" content="summary" />
    
    
    

    <!-- Title -->
    
    <title>第六章、Linux文件与目录管理 - March 13th&#39;s Blog</title>

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.2/css/bootstrap.min.css" integrity="sha384-y3tfxAZXuh4HwSYylfB+J125MxIs6mR5FOHamPBG064zB+AFeWH94NdvaCBm8qnd" crossorigin="anonymous">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Gallery -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.css" type="text/css" rel="stylesheet" />

    <!-- Custom CSS -->
    
<link rel="stylesheet" href="/css/style.css">


    <!-- Google Analytics -->
    


<meta name="generator" content="Hexo 6.0.0"></head>


<body>

<div class="bg-gradient"></div>
<div class="bg-pattern"></div>

<!-- Menu -->
<!--Menu Links and Overlay-->
<div class="menu-bg">
    <div class="menu-container">
        <ul>
            
            <li class="menu-item">
                <a href="/">
                    Home
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/archives">
                    Archives
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/tags">
                    Tags
                </a>
            </li>
            
            <li class="menu-item">
                <a href="/categories">
                    Categories
                </a>
            </li>
            
        </ul>
    </div>
</div>

<!--Hamburger Icon-->
<nav>
    <a href="#menu"></a>
</nav>

<div class="container">

    <!-- Main Content -->
    <div class="row">
    <div class="col-sm-12">

        <!--Title and Logo-->
        <header>
    <div class="logo">
        <a href="/"><i class="logo-icon fa fa-cube" aria-hidden="true"></i></a>
        
    </div>
</header>

        <section class="main">
            
<div class="post">

    <div class="post-header">
        <h1 class="title">
            <a href="/2022/03/14/%E7%AC%AC%E5%85%AD%E7%AB%A0%E3%80%81Linux%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86/">
                第六章、Linux文件与目录管理
            </a>
        </h1>
        <div class="post-info">
            
                <span class="date">2022-03-14</span>
            
            
            
                <span class="category">
                    <a href="/categories/鸟哥的Linux私房菜-读书笔记/">鸟哥的Linux私房菜-读书笔记</a>
                </span>
            
        </div>
    </div>

    <div class="content">

        <!-- Gallery -->
        

        <!-- Post Content -->
        <ul>
<li>#目录与路径<ul>
<li><p>##绝对路径与相对路径：略</p>
</li>
<li><p>##目录的相关操作</p>
<ul>
<li>####几个特殊目录<ul>
<li><p><strong>.</strong> 代表此层目录</p>
</li>
<li><p><strong>..</strong> 代表上一层目录</p>
</li>
<li><p><strong>-</strong> 代表前一个工作目录</p>
</li>
<li><p><strong>~</strong> 代表『目前用户身份』所在的家目录</p>
</li>
<li><p>**~**account 代表 account 这个用户的家目录(account 是个账号名称)</p>
<span id="more"></span></li>
</ul>
</li>
</ul>
</li>
<li><p>##几个常见处理目录的指令</p>
<ul>
<li>####cd(change directory, 变换目录)</li>
<li>####pwd(显示目前所在的目录)<ul>
<li>选项与参数：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    1. [-P]：显示出实际路径而非(link)路径</span><br><span class="line">+ mkdir(建立新目录)</span><br><span class="line">  - 选项与参数：</span><br></pre></td></tr></table></figure>
<ol>
<li>-m:指定文件权限而不需要看预设权限(umask)<br>  eg：mkdir -m 711 file_name</li>
<li>-p：直接将需要的目录递归创建起来<br>  eg：mkdir -p a&#x2F;b&#x2F;c&#x2F;d</li>
</ol>
</li>
</ul>
</li>
<li>rmdir(删除[空]目录)<ul>
<li>选项与参数：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">      1. -p：连同『上层』『空的』目录也一起删除</span><br><span class="line">  </span><br><span class="line">- ## 关于执行文件路径的变量：$PATH</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>echo $PATH：显示目前的PATH,执行顺序即搜到的顺序</li>
<li>添加PATH：PATH&#x3D;”${PATH}:&#x2F;root”<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    + 不同身份预设的PATH不同，默认能够随意执行的指令也不同</span><br><span class="line">---</span><br><span class="line">- #文件与目录管理</span><br><span class="line">  + ####文件与目录检索：ls</span><br><span class="line">    * 语法</span><br></pre></td></tr></table></figure>
<ol>
<li>ls [-aAdfFhilnrRSt] 文件名或目录名称</li>
<li>ls [–color&#x3D;{never,auto,always}] 文件名或目录名称</li>
<li>ls [–full-time] 文件名或目录名称</li>
</ol>
</li>
</ul>
<ul>
<li>选项与参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">    1. -a ：全部的文件， 连同隐藏档( 开头为 . 的文件) 一起列出来(常用)</span><br><span class="line">    2. -A ：全部的文件， 连同隐藏档，但不包括 . 与 .. 这两个目录</span><br><span class="line">    3. -d ： 仅列出目录本身，而不是列出目录内的文件数据(常用)</span><br><span class="line">    4. -f ：直接列出结果，而不进行排序 (ls 预设会以档名排序！ )</span><br><span class="line">    5. -F ：根据文件、目录等信息， 给予附加数据结构，例如： *:代表可执行文件； /:代表目录； =:代表 socket 文件； |:代表 FIFO 文件；</span><br><span class="line">    6. -h ： 将文件容量以易读的方式(例如 GB, KB 等等)列出来；</span><br><span class="line">    7. -i ：列出 inode 号码；</span><br><span class="line">    8. -l ： 长数据串行出，包含文件的属性与权限等等数据； (常用)</span><br><span class="line">    9. -n ：列出 UID 与 GID 而非使用者与群组的名称</span><br><span class="line">    10. -r ： 将排序结果反向输出，例如：原本档名由小到大，反向则为由大到小；</span><br><span class="line">    11. -R ： 连同子目录内容一起列出来，等于该目录下的所有文件都会显示出来；</span><br><span class="line">    12. -S ：以文件容量大小排序，而不是用档名排序；</span><br><span class="line">    13. -t ：依时间排序，而不是用档名。</span><br><span class="line">    14. --color=never ：不要依据文件特性给予颜色显示；</span><br><span class="line">    15. --color=always ： 显示颜色</span><br><span class="line">    16. --color=auto ： 让系统自行依据设定来判断是否给予颜色</span><br><span class="line">    17. --full-time ：以完整时间模式 (包含年、月、日、 时、分) 输出</span><br><span class="line">    18. --time=&#123;atime,ctime&#125; ： 输出 access 时间或改变权限属性时间 (ctime)而非内容变更时间 (modification time)</span><br><span class="line">    eg:ll -alF --color=never --full-time ~</span><br><span class="line">+ ####复制、删除和移动：cp/rm/mv</span><br><span class="line">  * 语法：</span><br></pre></td></tr></table></figure>
<ol>
<li>cp [-adfilprsu] 来源文件(source) 目标文件(destination)</li>
<li>cp [options] source1 source2 source3 …. directory</li>
</ol>
</li>
<li>选项和参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">    1. -a ：相当于 -dr --preserve=all  (常用)</span><br><span class="line">    2. -d ：若来源文件为链接文件的属性(link file)， 则复制链接文件属性而非文件本身；</span><br><span class="line">    3. -f ： 为强制(force)的意思，若目标文件已经存在且无法开启， 则移除后再尝试一次；</span><br><span class="line">    4. -i ：若目标文件(destination)已经存在时，在覆盖时会先询问动作的进行(常用)</span><br><span class="line">    5. -l ： 进行硬式连结(hard link)的连结档建立，而非复制文件本身；</span><br><span class="line">    6. -p ： 连同文件的属性(权限、用户、 时间)一起复制过去，而非使用默认属性(备份常用)；</span><br><span class="line">    7. -r ： 递归持续复制，用于目录的复制行为； (常用)</span><br><span class="line">    8. -s ：复制成为符号链接文件 (symbolic link)；</span><br><span class="line">    9. -u ： destination 比 source 旧才更新 destination，或 destination 不存在的情况下才复制。</span><br><span class="line">    10. --preserve=all ：除了 -p 的权限相关参数外， 还加入 SELinux 的属性, links, xattr 等也复制了。</span><br><span class="line">    注：如果source有两个以上，destination必须得是目录</span><br><span class="line">  * 在预设条件中，cp的源文件与目标文件的权限事不同的，目标文件的拥有者通常事指令操作者本身，三思而后复制哈哈</span><br><span class="line">+ ####rm (移除文件或目录)</span><br><span class="line">  * 选线和参数：  </span><br></pre></td></tr></table></figure>
<ol>
<li>-f：(force) ，忽略不存在的文件，不会出现警告讯息</li>
<li>-i：删除前询问使用者</li>
<li>-r：递归删除</li>
</ol>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>####mv (移动文件与目录，或更名)</p>
<ul>
<li>语法：    <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">  1. mv [-fiu] source destination</span><br><span class="line">  2. mv [options] source1 source2 source3 .... directory</span><br><span class="line">* 选项与参数</span><br></pre></td></tr></table></figure>
<ol>
<li>-f：如果目标文件已经存在，不会询问而直接覆盖</li>
<li>-i：若目标文件 (destination) 已经存在时，就会询问是否覆盖</li>
<li>-u：若目标文件已经存在，且 source 比较新，才会更新 (update)</li>
</ol>
</li>
</ul>
</li>
<li><p>取得路径的文件名与目录名称</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    1. basename /etc/sysconfig/network--&gt;network</span><br><span class="line">    2. dirname /etc/sysconfig/network--&gt;/etc/sysconfig</span><br><span class="line">---</span><br><span class="line">- #文件内容查阅</span><br><span class="line">  + ##直接查看文件内容</span><br><span class="line">    * ####cat(concatenate)</span><br><span class="line">      选项与参数：</span><br></pre></td></tr></table></figure>
<ol>
<li>-A ：等于 -vET</li>
<li>-b ：列出行号， 仅针对非空白行做行号显示</li>
<li>-E ： 显示结尾断行符 $ </li>
<li>-n ：列出行号， 连同空白行也会有行号</li>
<li>-T ： 将 [tab] 按键以 ^I 显示出来；</li>
<li>-v ：列出一些看不出来的特殊字符</li>
</ol>
<ul>
<li>####tac(反向显示)</li>
<li>####nl(添加行号打印)<br>选项和参数：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">    1. -b ：指定行号指定的方式，主要有两种：</span><br><span class="line">        -b a ：表示不论是否为空行，也同样列出行号(类似 cat -n)；</span><br><span class="line">        -b t ：如果有空行，空的那一行不要列出行号(默认值)；</span><br><span class="line">    2. -n ：列出行号表示的方法，主要有三种：</span><br><span class="line">        -n ln ：行号在屏幕的最左方显示；</span><br><span class="line">        -n rn ：行号在自己字段的最右方显示，且不加 0 ；</span><br><span class="line">        -n rz ：行号在自己字段的最右方显示，且加 0 ；</span><br><span class="line">    3. -w ：行号字段的占用的字符数。</span><br><span class="line">+ ##可翻页查看</span><br><span class="line">  * ####more (一页一页翻动)</span><br><span class="line">    选项和参数：</span><br></pre></td></tr></table></figure>
<ol>
<li>空格键 (space)：代表向下翻一页</li>
<li>Enter ：代表向下翻『一行』</li>
<li>&#x2F;字符串 ：代表在这个显示的内容当中，向下搜寻『字符串』这个关键词</li>
<li>f ：立刻显示出文件名以及目前显示的行数</li>
<li>q ：代表立刻离开 more ，不再显示该文件内容</li>
<li>b 或 [ctrl]-b ：代表往回翻页，不过这动作只对文件有用，对管线无用</li>
</ol>
</li>
<li>####less (一页一页翻动，man就是使用less来显示说明文件的)<br>选项和参数：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    1. 空格键 ：向下翻动一页；</span><br><span class="line">    2. [pagedown]：向下翻动一页；</span><br><span class="line">    3. [pageup] ：向上翻动一页；</span><br><span class="line">    4. /字符串 ：向下搜寻『字符串』的功能；</span><br><span class="line">    5. ?字符串 ：向上搜寻『字符串』的功能；</span><br><span class="line">    6. n ：重复前一个搜寻 (与 / 或 ? 有关！ )</span><br><span class="line">    7. N ：反向的重复前一个搜寻 (与 / 或 ? 有关！ )</span><br><span class="line">    8. g ：前进到这个资料的第一行去；</span><br><span class="line">    9. G ：前进到这个数据的最后一行去 (注意大小写)；</span><br><span class="line">    10. q ：离开 less 这个程序；</span><br><span class="line">+ ##资料撷取</span><br><span class="line">  * ####head (取出前面几行)</span><br><span class="line">    - 语法</span><br></pre></td></tr></table></figure>
<ol>
<li>head [-n number] 文件</li>
</ol>
<ul>
<li>选项与参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">    1. -n ：后面接数字，代表显示几行，不加此选项默认显示十行，如为负数代表显示负数绝对值前面的行</span><br><span class="line">* ####tail (取出后面几行)</span><br><span class="line">  - 语法</span><br></pre></td></tr></table></figure>
<ol>
<li>head [-n number] 文件</li>
</ol>
</li>
<li>选项与参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">      1. -n ：后面接数字，代表显示几行，如选项为+n，则代表显示n行以后的数据</span><br><span class="line">      2. -f ：表示持续侦测后面所接的档名，要等到按下[ctrl]-c 才会结束 tail 的侦测</span><br><span class="line">  * 非纯文本档： od(我觉得自己暂时用不到O(∩_∩)O)</span><br><span class="line">+ ##修改文件时间或建置新档： touch</span><br><span class="line">  * 文件的三个主要变动时间</span><br><span class="line">    1. modification time (mtime)：文件的内容数据(文件的内容，非属性或权限)变更时的时间</span><br><span class="line">    2. status time (ctime)：当文件的状态(比如权限和属性)改变时会更新的时间</span><br><span class="line">    3. access time (atime)：当文件的内容被读取时候会更新的读取时间</span><br><span class="line">  * ls默认情况显示的是文件的mtime，其余可用ls -l --time=&#123;atime，ctime&#125;来查看</span><br><span class="line">  * 语法</span><br></pre></td></tr></table></figure></li>
</ul>
<ol>
<li>touch [-acdmt] 文件</li>
</ol>
</li>
<li>选项与参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">      1. -a ： 仅修改access time；</span><br><span class="line">      2. -c ： 仅修改文件的时间，若该文件不存在则不建立新文件(全都修改了)</span><br><span class="line">      3. -d ：后面可以接欲修订的日期而不用目前的日期，也可以使用--date=&quot;日期或时间&quot;(atime/mtime)</span><br><span class="line">      4. -m ： 仅修改 mtime ；</span><br><span class="line">      5. -t ：后面可以接欲修订的时间而不用目前的时间，格式为[YYYYMMDDhhmm]）(atime/mtime)</span><br><span class="line">---</span><br><span class="line">- #文件与目录的默认权限与隐藏权限</span><br><span class="line">  + ##文件预设权限：</span><br><span class="line">      umask(目前用户在建立文件or目录时的权限默认值，可直接通过umask value设定)</span><br><span class="line">    * ####两种查阅方式：</span><br><span class="line">      1. 直接输入umask，可见到数字形态的权限设定</span><br><span class="line">      2. 加上-S可以符号形式来显示</span><br><span class="line">      3. 注：为啥有四组，第一组是特殊权限</span><br><span class="line">    * ####两种预设情况</span><br><span class="line">      1. 目录：drwxrwxrwx，建立目录时： (drwxrwxrwx) - (d----w--w-) ==&gt; drwxr-xr-x</span><br><span class="line">      2. 文件：-rw-rw-rw-，建立文件时： (-rw-rw-rw-) - (-----w--w-) ==&gt; -rw-r--r--</span><br><span class="line">  + ##文件隐藏属性</span><br><span class="line">    * 注：chattr指令只在ext2/ext3/ext4的Linux传统文件系统完整生效，其他文件系统eg：xfs只支持部分参数</span><br><span class="line">    * ####chattr (配置文件案隐藏属性)</span><br><span class="line">      - 语法</span><br></pre></td></tr></table></figure>
<ol>
<li>chattr [+-&#x3D;][ASacdistu] 文件或目录名称</li>
</ol>
<ul>
<li>选项与参数<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  1. + ：增加某一个特殊参数，其他原本存在参数则不动。</span><br><span class="line">  2. - ：移除某一个特殊参数，其他原本存在参数则不动。</span><br><span class="line">  3. = ： 更新为指定参数</span><br><span class="line">  4. A：文件的atime(access time)不可被修改，这样可以减少磁盘I/O数量，对于笔记本电脑有利于提高续航能力</span><br><span class="line">  5. S：硬盘I/O同步选项，功能类似sync</span><br><span class="line">  6. a ： 当设定 a 之后， 这个文件将只能增加数据，而不能删除也不能修改数据，只有 root 才能设定这属性</span><br><span class="line">  7. c：即compresse，文件会自动的经压缩后再存储，读取时会自动的解压</span><br><span class="line">  8. d：不被dump程序备份</span><br><span class="line">  9. i：设定该属性后，可使得文件不能被删除、重命名、设定连接关系、写入或新增数据，仅有root可设定此属性</span><br><span class="line">  10. s：文件被删除后将被完全移除硬盘空间，不能救回</span><br><span class="line">  11. u：与s相反，文件删除后可救回</span><br><span class="line">- 注意</span><br></pre></td></tr></table></figure>
<ol>
<li>常见使用a与i，很多属性需要root才能设定</li>
<li>xfs文件系统仅支持AadiS</li>
</ol>
</li>
</ul>
</li>
<li>####lsattr(显示文件隐藏属性)<ul>
<li>语法<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  1. lsattr [-adR] 文件或目录</span><br><span class="line">- 选项与参数</span><br></pre></td></tr></table></figure>
<ol>
<li>-a ： 显示所有文件的隐藏权限，包括隐藏文件</li>
<li>-d：显示目录的属性而非目录内文件的属性</li>
<li>递归显示目录下文件和子目录的属性</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
<li><p>##文件特殊权限：SUID,SGID,SBIT</p>
<ul>
<li>####Set UID<br>当s标志出现在文件owner的权限上时，(eg：&#x2F;usr&#x2F;bin&#x2F;passwd)此时被称为Set UID(简称SUID的特殊权限)<ul>
<li>SUID的限制有功能<ol>
<li>SUID权限仅对二进制程序有效(不能用在shell script上)</li>
<li>执行者需对该程序有x权限</li>
<li>SUID权限仅仅在执行该程序的过程中有效</li>
<li>执行者在此过程中将具有该程序owner的权限</li>
</ol>
</li>
<li>这里给的例子真的是让人一下就明白了，&#x2F;etc&#x2F;shadow的权限为———- 1 root root，但是一个一般账号也可以通过passwd指令来修改密码呀，这就是SUID的功能啦，&#x2F;usr&#x2F;bin&#x2F;passwd的权限是rwsr-xr-x，所以一般账号也有x权限，临时借用了一下root的权限对etc&#x2F;shadow进行修改</li>
</ul>
</li>
<li>####Set GID<br>当s标志在文件group权限上时，称为Set GID(简称SGID),(eg &#x2F;usr&#x2F;bin&#x2F;locate)<ul>
<li>与SUID不同，SGID可以针对文件或目录及来设置<ul>
<li>对文件<ol>
<li>SGID对二进制程序有效</li>
<li>执行者需要对该程序有x的权限</li>
<li>执行者在执行过程中将会得到程序群组的支持</li>
</ol>
</li>
</ul>
<ul>
<li>eg，locate可以搜寻&#x2F;var&#x2F;lib&#x2F;mlocate&#x2F;mlocate.db中的内容，mlocate.db的权限为-rw-r—–，locate的权限为-rwx–s–x，那么一般账号在执行locate时将会在执行过程中的到slocate群组的支持，于是才能读取mlocate.db的内容</li>
</ul>
</li>
</ul>
<ul>
<li>对目录<ol>
<li>用户对于此目录具有r与x权限时，该用户能够进入此目录</li>
<li>用户在此目录下的有效群组将会变成该目录的群组</li>
<li>用途：若用户在此目录具有w的权限，则使用则锁建立的新文件，该新文件的群组与此目录的群组相同</li>
</ol>
</li>
</ul>
</li>
<li>####Sticky Bit<br>(简称SBIT)，只针对目录有效<ul>
<li>对目录<ol>
<li>当用户对此目录具有w权限(具有group或others的权限时)</li>
<li>当用户在该目录下建立文件or目录时，仅有自己与root才有权力删除&#x2F;重命名&#x2F;移动文件</li>
</ol>
</li>
<li>eg：以不同用户在tmp下建立文件，切换用户尝试删除操作</li>
</ul>
</li>
<li>SUID&#x2F;SGID&#x2F;SBIT权限设定<ul>
<li>4：SUID</li>
<li>2：SGID</li>
<li>1：SBIT</li>
<li>eg：需要将一个文件权限修改为-rwsr-xr-x，即加入SUID权限<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">      chmod  4755 filename  </span><br><span class="line">      顺便试一下其他几种情况</span><br><span class="line">      chmod  6755 filename</span><br><span class="line">      chmod  1755 filename</span><br><span class="line">      chmod  7666 filename，(这种情况下会出现S和T，这是因为文件本身都不具有x的权限，想一想SUID时文件执行时具有文件owner的权限，既然都不能执行，哪来的的权限借用，所以S、T代表就是“空的”的意思)</span><br><span class="line">       这是符号法来处理(个人认为不如数字法方便)</span><br><span class="line">       chmod u=rwxs，go=x filename</span><br><span class="line">       chmod g+s，o+t filename</span><br><span class="line">+ ##观察文件类型：file</span><br><span class="line">  * 如果想知道某个文件的基本数据类型，可以使用file</span><br><span class="line">  * 语法</span><br></pre></td></tr></table></figure></li>
</ul>
<ol>
<li>file filename</li>
</ol>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>#指令与文件的搜索<ul>
<li>##脚本文件名的搜索<ul>
<li>####which<ul>
<li>语法<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  1. which [-a] command</span><br><span class="line">- 选项与参数</span><br></pre></td></tr></table></figure>
<ol>
<li>-a：将所有PATH目录中可以找到的指令列出而不仅仅是列出第一个被找到的指令名称</li>
</ol>
</li>
<li>注:which预设找PATH内所规范的目录，但是找不到bash内建的指令，eg：which history是找不到的</li>
</ul>
</li>
</ul>
</li>
<li>文件档名的搜寻<ul>
<li>####whereis(有一些特定的目录中寻找文件文件名)<ul>
<li>语法<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  1. whereis [-bmsu] 文件或目录名</span><br><span class="line">- 选项与参数</span><br></pre></td></tr></table></figure>
<ol>
<li>-l：列出whereis会查询的几个主要目录</li>
<li>-b：执照二进制格式的文件</li>
<li>-m：只找在说明文件manual路径下的文件</li>
<li>-s：只找source来源文件</li>
<li>-u：搜寻不在上面三个选项中的其他特殊文件</li>
</ol>
</li>
</ul>
</li>
<li>####locate&#x2F;updatedb<ul>
<li>语法<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  1. locate [-ir] keyword</span><br><span class="line">- 选项与参数</span><br></pre></td></tr></table></figure>
<ol>
<li>-i：忽略大小写差异</li>
<li>-c：不输出档名，仅计算找到的数据量</li>
<li>-l：输出几行的意思，eg，输出5行： -l 5</li>
<li>-S：输出locate所使用数据库文件的相关信息，包括该数据库记录的文件&#x2F;目录数量…etc</li>
<li>-r：后面可接正则表达式的显示方式</li>
</ol>
</li>
<li>注：locate搜索快的原因是因为他是经由数据库搜寻的，而在CentOS7.x中数据库是每天更新一次的，所以可能对于新建立的文件无法搜寻到，需要使用updatedb读取&#x2F;etc&#x2F;updatedb.conf配置更新数据库<ol>
<li>updatedb：根据&#x2F;etc&#x2F;updatedb.conf的设置搜寻硬盘内文件名并跟新&#x2F;var&#x2F;lib&#x2F;mlocate内的数据库文件</li>
<li>locate：根据&#x2F;var&#x2F;lib&#x2F;mlocate的数据库记载找出用户输入的关键词文件名</li>
</ol>
</li>
</ul>
</li>
<li>####find<ul>
<li>语法<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  1. find [PATH] [option] [action]</span><br><span class="line">- 选项与参数</span><br></pre></td></tr></table></figure>
<ol>
<li>与时间有关的选项：共有 -atime, -ctime 与 -mtime ，以 -mtime 说明</li>
</ol>
<p>  -mtime n ： n 为数字，意义为在 n 天之前的『一天之内』被更动过内容的文件；<br>  -mtime +n ：列出在 n 天之前(不含 n 天本身)被更动过内容的文件档名；<br>  -mtime -n ：列出在 n 天之内(含 n 天本身)被更动过内容的文件档名。<br>  -newer file ： file 为一个存在的文件，列出比 file 还要新的文件档名<br>2. 与使用者或组名有关的参数：<br>  -uid n ： n 为数字， 这个数字是用户的账号 ID，亦即UID ， 这个 UID 是记录在&#x2F;etc&#x2F;passwd 里面与账号名称对应的数字。<br>  -gid n ： n 为数字， 这个数字是组名的 ID，亦即 GID， 这个 GID 记录在&#x2F;etc&#x2F;group<br>  -user name ：查找符合指定的拥有者名称的文件或目录<br>  -group name： 查找符合指定的组名称的文件或目录<br>  -nouser：找出不属于本地主机用户识别码的文件或目录(通过这个指令可以轻易找到不太正常的文件，但是如果找到也不要紧张，有时是正常的~尤其是以原始码自行编译软件时候)<br>  -nogroup：找出不属于本地主机群组识别码的文件或目录<br>3. 与文件权限即名称有关的参数<br>  -name filename：搜寻文件名为 filename 的文件<br>  -size [+-]SIZE：搜寻比 SIZE 还要大(+)或小(-)的文件。 这个 SIZE 的规格有：c: 代表 byte， k: 代表 1024bytes。所以，要找比 50KB还要大的文件，就是『-size +50k 』<br>  -type TYPE：搜寻文件的类型为 TYPE 的， 类型主要有：一般正规文件 (f), 装置文件 (b, c),目录 (d), 连结档 (l), socket (s), 及 FIFO (p) 等属性<br>  -perm mode：搜寻文件权限刚好等于mode的文件，mode类似于chmod的属性值，eg：-rwsr-xr-x 的属性为 4755<br>  -perm -mode：搜寻文件权限『必须要全部囊括 mode 的权限』的文件，比如4755包括0744啦<br>  -perm &#x2F;mode：搜寻文件权限『包含任一 mode 的权限』的文件，就是会搜索到他的子集啦<br>4. 额外可进行的动作<br>   -exec command： command 为其他指令， -exec 后面可再接额外的指令来处理搜寻到的结果<br>    -print：将结果打印到屏幕上(这是默认的)</p>
</li>
<li>几个例子<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">        1. find / -name ”*passwd*“</span><br><span class="line">        2. find /run -type s</span><br><span class="line">        3. find / -perm /7000，这个比较有意思7000表示---s--s--t，那么搜索其子集的话呢，意味着具有SUID,SGID,SBIT权限的问价or目录会被列出</span><br><span class="line">        4. find /usr/bin /usr/sbin -perm /7000 -exec ls -l &#123;&#125; \;</span><br><span class="line">          &#123;&#125;代表由find找到的内容，或者说find的结果会被放置到&#123;&#125;中</span><br><span class="line">          -exec到\；之间是关键词，代表find额外的动作</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">      - 关于时间参数可参见下图：</span><br><span class="line">        +4 代表大于等于 5 天前的文件名： find /var -mtime +4</span><br><span class="line">        -4 代表小于等于 4 天内的文件名：find /var -mtime -4</span><br><span class="line">        4 则是代表 4-5 那一天的文件名：find /var -mtime 4</span><br><span class="line">       ![](https://upload-images.jianshu.io/upload_images/13107967-0f2f922e8c842009.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)</span><br><span class="line">---</span><br><span class="line">- #权限与指令之间的关系</span><br><span class="line">  + ##让用户能进入某目录的基本权限：</span><br><span class="line">    1. 目录：用户对此目录至少有x权限</span><br><span class="line">    2. 额外：若过想查阅目录内文件名(ls)，需有r权限</span><br><span class="line">  + ##让用户在某个目录内读取一个文件的基本权限：</span><br><span class="line">    1. 目录：用户至少有x权限</span><br><span class="line">    2. 文件：用户至少有r权限</span><br><span class="line">  + ##让用户可修改一个文件的基本权限：</span><br><span class="line">    1. 目录：用户至少有x权限</span><br><span class="line">    2. 文件：用户至少对该文件有r，w权限</span><br><span class="line">  + ##用户建立一个文件的基本权限：</span><br><span class="line">    1. 目录：用户在该目录要有x，w权限</span><br><span class="line">  + ##用户进入某目录并执行目录内某个指令：</span><br><span class="line">    1. 目录：至少有x权限</span><br><span class="line">    2. 文件：至少有x权限</span><br><span class="line">---</span><br><span class="line">- #重点回顾</span><br><span class="line">  + ls 可以检视文件的属性，尤其 -d, -a, -l 等选项特别重要</span><br><span class="line">  + cat -n 与 nl 均可显示行号，但默认的情况下，空白行会不会编号并不相同</span><br><span class="line">  + 除了传统的 rwx 权限之外，在 Ext2/Ext3/Ext4/xfs 文件系统中，还可以使用 chattr 与 lsattr 设定及观察隐藏属性。 常见的包括只能新增数据的 +a 与完全不能更动文件的 +i 属性</span><br><span class="line">  + 新建文件/目录时，新文件的预设权限使用 umask 来规范。默认目录完全权限为 drwxrwxrwx， 文件则为-rw-rw-rw-</span><br><span class="line">  + 文件具有 SUID 的特殊权限时，代表当用户执行此一 binary 程序时，在执行过程中用户会暂时具有程序拥有者的权限</span><br><span class="line">  + 目录具有 SGID 的特殊权限时，代表用户在这个目录底下新建的文件之群组都会与该目录的组名相同</span><br><span class="line">  + 目录具有 SBIT 的特殊权限时，代表在该目录下用户建立的文件只有自己与 root 能够删除</span><br><span class="line">- #课后问题</span><br><span class="line">  1. 假设系统中有两个账号，分别是 alex 与 arod ，这两个人除了自己群组之外还共同支持一个名为project 的群组。假设这两个用户需要共同拥有 /srv/ahome/ 目录的开发权，且该目录不许其他人进入查阅。 请问</span><br><span class="line">     该目录的权限设定应为何？(真的做一遍就明白了)</span><br></pre></td></tr></table></figure>
groupadd project<br>useradd -G project alex<br>useradd -G project arod<br>mkdir &#x2F;srv&#x2F;ahome<br>chgrp project &#x2F;srv&#x2F;ahome<br>chmod 2770 &#x2F;srv&#x2F;ahome</li>
</ul>
</li>
</ul>
</li>
</ul>
<ol start="2">
<li>找出 &#x2F;etc 底下， 文件大小介于 50K 到 60K 之间的文件，并且将权限完整的列出 (ls -l)<br>  <code> find /etc -size +50k -a -size -60k -exec ls -l &#123;&#125; \;( -a 是 and 的意思)</code><br> 找出 &#x2F;etc 底下， 文件容量大于 50K 且文件所属人不是 root 的档名，且将权限完整的列出 (ls -l)<br> <code>find /etc -size +50k -a ! -user root -exec ls -ld &#123;&#125; \;</code><br> <code>find /etc -size +50k -a ! -user root -type f -exec ls -l &#123;&#125; \;( ! 代表的是反向选择)</code><br>找出 &#x2F;etc 底下，容量大于 1500K 以及容量等于 0 的文件<br> <code>find /etc -size +1500k -o -size 0(-o 就是或 (or) )</code></li>
</ol>
</li>
</ul>

    </div>

    

    
        <div class="post-tags">
            <i class="fa fa-tags" aria-hidden="true"></i>
            <a href="/tags/Linux/">#Linux</a>
        </div>
    

    <!-- Comments -->
    

</div>
        </section>

    </div>
</div>


</div>

<!-- Footer -->
<div class="push"></div>

<footer class="footer-content">
    <div class="container">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 footer-about">
                <h2>About</h2>
                <p>
                    'If only I had ... ' If you ever have that thought ricocheting in your brain, it will hurt a lot.---Larry Smith《Why you will fail to have a great career》
                </p>
            </div>
            
    <div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 recent-posts">
        <h2>Recent Posts</h2>
        <ul>
            
            <li>
                <a class="footer-post" href="/2022/06/25/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80-%E7%AC%AC%E4%B8%80%E7%AB%A0-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/">汇编语言 第一章 基础知识</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/06/08/%E4%B8%BB%E5%8A%A8%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-NFS/">主动信息收集-NFS</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/05/07/3-Using-the-help-system/">3 Using the help system</a>
            </li>
            
            <li>
                <a class="footer-post" href="/2022/05/07/%E5%8D%9A%E5%AE%A2%E8%AE%B0%E5%BD%95%E5%8F%8A%E5%B8%B8%E7%94%A8%E9%93%BE%E6%8E%A5/">博客记录及常用链接</a>
            </li>
            
        </ul>
    </div>



            
<div class="col-xs-6 col-sm-6 col-md-3 col-lg-3 footer-categories">
    <h2>Categories</h2>
    <ul>
        
        <li>
            <a class="footer-post" href="/categories/Professor-Messer%E2%80%99s-CompTIA-N10-008-Network-Course-notes/">Professor Messer’s CompTI</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Learn-Windows-PowerShell-in-a-Month-of-Lunches-%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">Learn Windows PowerShell </a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/Precious/">Precious</a>
        </li>
        
        <li>
            <a class="footer-post" href="/categories/PENTEST/">PENTEST</a>
        </li>
        
    </ul>
</div>

        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <ul class="list-inline footer-social-icons">
                    
                    <li class="list-inline-item">
                        <a target="_blank" rel="noopener" href="https://github.com/March13th">
                            <span class="footer-icon-container">
                                <i class="fa fa-github"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    <li class="list-inline-item">
                        <a href="mailto:sheldor13th@gmail.com">
                            <span class="footer-icon-container">
                                <i class="fa fa-envelope-o"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="footer-copyright">
                    @Untitled. All right reserved | Design & Hexo <a target="_blank" rel="noopener" href="http://www.codeblocq.com/">Jonathan Klughertz</a>
                </div>
            </div>
        </div>
    </div>
</footer>

<!-- After footer scripts -->

<!-- jQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Tween Max -->
<script src="//cdnjs.cloudflare.com/ajax/libs/gsap/1.18.5/TweenMax.min.js"></script>

<!-- Gallery -->
<script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script>

<!-- Custom JavaScript -->

<script src="/js/main.js"></script>


<!-- Disqus Comments -->



</body>

</html>